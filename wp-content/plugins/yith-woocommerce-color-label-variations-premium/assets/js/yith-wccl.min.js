jQuery(document).ready(function(a){"use strict";if("undefined"==typeof yith_wccl_general)return!1;var b=[],c="";a.fn.yith_wccl_select=function(b,c){var l,m,n,h=a(this),i=b[h.attr("name")],j=h.parent().find(".select_box"),k=[];"undefined"==typeof i&&(l=decodeURIComponent(h.attr("name")),i=b[l]),m="undefined"!=typeof i?i.type:h.data("type"),n="undefined"!=typeof i&&i.terms,h.addClass("yith_wccl_custom").hide(),h.closest(".select-wrapper").addClass("yith_wccl_is_custom"),j.length&&yith_wccl_general.grey_out||(j.remove(),j=a("<div />",{class:"select_box_"+m+" select_box "+h.attr("name")}).insertAfter(h)),h.find("option").each(function(){var b=a(this).val();if(n&&"undefined"!=typeof n[b]||a(this).data("value")){k.push(b);var i="select_option_"+m+" select_option",l=n&&"undefined"!=typeof n[b]?n[b].value:a(this).data("value"),o=n&&"undefined"!=typeof n[b]?n[b].tooltip:a(this).data("tooltip"),p=a(this),q=j.find('[data-value="'+b+'"]');q.length||(b==h.val()&&(i+=" selected"),q=a("<div/>",{class:i,"data-value":b}).appendTo(j),q.on("click",function(b){if(a(this).hasClass("inactive")){var f=h.data("attribute_name")||h.attr("name");d(c,a(this).data("value"),f)?h.val("").change():e(c,!1,[])}a(this).hasClass("selected")?h.val("").change():h.val(p.val()).change(),g(a(this))}),"colorpicker"==m?(l=l.split(","),1==l.length?q.append(a("<span/>",{class:"yith_wccl_value",css:{background:l}})):(q.append(a('<span class="yith_wccl_value"><span class="yith-wccl-bicolor"/></span>')),q.find(".yith-wccl-bicolor").css({"border-bottom-color":l[0],"border-left-color":l[1]}))):"image"==m?q.append(a("<img/>",{class:"yith_wccl_value",src:l})):"label"==m&&q.append(a("<span/>",{class:"yith_wccl_value",text:l})),yith_wccl_general.tooltip&&"undefined"!=typeof o&&""!=o&&("image"==m&&o.indexOf("{show_image}")!=-1&&(o=o.replace("{show_image}",'<img src="'+l+'" />')),f(q,o)))}}),j.children().each(function(){var b=a(this).data("value")+"";"-1"==a.inArray(b,k)?a(this).addClass("inactive"):a(this).removeClass("inactive")})};var d=function(b,c,d){var e=!1,f=b.data("product_variations"),g=b.find(".variations select"),h=[];a.each(g,function(){var b=a(this).data("attribute_name")||a(this).attr("name");d==b?h[b]=c:h[b]=a(this).val()});for(var i=0;i<f.length;i++){var j=f[i];if(e)break;e=j;for(var k in j.attributes)if(j.attributes.hasOwnProperty(k)){var l=j.attributes[k],m=h[k];l!=m&&""!=l&&(e=!1)}}return e},e=function(a,b,c){var d=a.find(".variations select");1==d.length&&b?a.trigger("woocommerce_update_variation_values"):d.val(""),d.change(),b||(a.find("div.select_option").removeClass("selected inactive"),a.trigger("reset_data"))},f=function(b,c){var d=a('<span class="yith_wccl_tooltip"></span>'),e=yith_wccl_general.tooltip_pos+" "+yith_wccl_general.tooltip_ani;d.addClass(e),b.append(d.html("<span>"+c+"</span>"))},g=function(a){a.toggleClass("selected"),a.siblings().removeClass("selected")},h=function(b){b.preventDefault();var c=a(this),d=c.data("product_id"),e=c.data("quantity"),f=[],g=!1;b.data.select.each(function(a){f[a]=this.name+"="+this.value});try{g="sessionStorage"in window&&null!==window.sessionStorage,window.sessionStorage.setItem("wc","test"),window.sessionStorage.removeItem("wc")}catch(a){g=!1}a.ajax({url:yith_wccl_general.ajaxurl.toString().replace("%%endpoint%%","yith_wccl_add_to_cart"),type:"POST",data:{action:"yith_wccl_add_to_cart",product_id:d,variation_id:b.data.variation,attr:f.join("&"),quantity:e,context:"frontend"},beforeSend:function(){c.addClass("loading").removeClass("added")},success:function(b){return b.error&&b.product_url?void(window.location=b.product_url):yith_wccl_general.cart_redirect?void(window.location=yith_wccl_general.cart_url):(c.removeClass("loading").addClass("added"),c.next(".added_to_cart").length||c.after(' <a href="'+yith_wccl_general.cart_url+'" class="added_to_cart wc-forward" title="'+yith_wccl_general.view_cart+'">'+yith_wccl_general.view_cart+"</a>"),b.fragments&&a.each(b.fragments,function(b,c){a(b).replaceWith(c)}),g&&(sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(b.fragments)),sessionStorage.setItem("wc_cart_hash",b.cart_hash)),a(document).trigger("wc_update_cart"),void a(document.body).trigger("added_to_cart",[b.fragments,b.cart_hash,c]))}})};a.yith_wccl=function(b){c=a(".variations_form.cart:not(.initialized), .owl-item.cloned .variations_form, form.cart.ywcp_form_loaded"),b="undefined"!=typeof yith_wccl?JSON.parse(yith_wccl.attributes):b,"undefined"==typeof b&&(b=[]),c.each(function(){if(0!==b.length||a(this).hasClass("in_loop")){var c=a(this),f=c.find(".variations select"),g=!1,i=!1,j=c.closest(yith_wccl_general.wrapper_container_shop).length?c.closest(yith_wccl_general.wrapper_container_shop):c.closest(".product-add-to-cart"),k=j.find("img.wp-post-image"),l="undefined"!=k.data("lazy-src")?k.data("lazy-src"):k.attr("src"),m="undefined"!=k.data("lazy-srcset")?k.data("lazy-srcset"):k.attr("srcset"),n=j.find("span.price").clone().wrap("<p>").parent().html(),o=j.find("a.product_type_variable"),p=o.html(),q=j.find("input.thumbnail-quantity"),r=c.data("product_variations"),s=r===!1,t=function(d,f){var g=d.length;d.each(function(){var l,d=b[this.name],h="undefined"!=typeof d,i=a(this).data("type"),k=c.hasClass("initialized");if(h||(l=decodeURIComponent(this.name),d=b[l],h="undefined"!=typeof d),--g,k||(f?a(this).attr("data-default_value",a(this).val()):a(this).val(a(this).data("default_value"))),h||i)if(f){if(!c.hasClass("in_loop")&&!j.length&&yith_wccl_general.description&&d.descr){var m=!!a(this).closest("tr").length,n=m?'<tr><td colspan="2">'+d.descr+"</td></tr>":'<p class="attribute_description">'+d.descr+"</p>";m?a(this).closest("tr").after(n):a(this).parent().append(n)}}else(h&&d.terms||i)&&a(this).yith_wccl_select(b,c);f&&!g&&e(c,!0,b),g||k||(c.addClass("initialized"),c.fadeIn(),a(c).trigger("yith_wccl_form_initialized"))})},u=function(){v(!1),j.find("span.price").replaceWith(n),j.find(".ywccl_stock").remove(),q.length&&q.hide(),o.html(p).off("click",h).removeClass("added").next(".added_to_cart").remove()},v=function(a){if(a){var b="undefined"!=typeof a.image?a.image.src:a.image_src,c="undefined"!=typeof a.image?a.image.srcset:a.image_srcset;b&&b.length&&(k.attr("src",b),k.attr("data-lazy-src",b)),c&&c.length&&(k.attr("srcset",c),k.attr("data-lazy-srcset",c))}else k.attr("src",l),k.attr("srcset",m)};c.on("check_variations",function(a,b,c){if(!c){if(g)return void(g=!1);i&&(i=!1,u())}}),c.on("woocommerce_update_variation_values",function(){t(f,!1)}),c.on("reset_data",function(){s&&t(f,!1)}),c.on("found_variation",function(b,d){if(s)t(f,!1);else{if(f.last().trigger("focusin"),!c.hasClass("in_loop"))return;i&&u(),g=!0,i=!0;var e=d.price_html,k=d.variation_id;v(d),""!=e&&j.find("span.price").replaceWith(e),q.length&&q.show(),d.is_in_stock&&(o.html(yith_wccl_general.add_cart),o.off("click").on("click",{variation:k,select:f},h)),j.find("span.price").after(a(d.availability_html).addClass("ywccl_stock")),a(document).trigger("ywccl_found_variation_in_loop",[d])}}),c.on("click",".reset_variations",function(){a(".select_option.selected").removeClass("selected")}),c.hasClass("in_loop")&&c.parent().on("change",function(a){a.stopPropagation()}),q.length&&q.hide(),t(f,!0),1==f.length&&yith_wccl_general.image_hover&&(c.on("mouseenter",".select_option",function(){var b=a(this).attr("data-value"),e=f.attr("name"),g=d(c,b,e);a(this).hasClass("selected")||a(this).siblings().hasClass("selected")||g&&(c.hasClass("in_loop")?v(g):c.wc_variations_image_update(g))}),c.on("mouseleave",".select_option",function(){a(this).hasClass("selected")||a(this).siblings().hasClass("selected")||(c.hasClass("in_loop")?v(!1):c.wc_variations_image_update(!1))}))}})},a.yith_wccl(b),a(document).on("yith-wcan-ajax-filtered yith_infs_adding_elem initialized.owl.carousel",function(){"undefined"!=typeof a.yith_wccl&&"undefined"!=typeof a.fn.wc_variation_form&&(a(document).find(".variations_form:not(.initialized), .owl-item.cloned .variations_form").each(function(){a(this).wc_variation_form()}),a.yith_wccl(b))}),a("body").on("quick-view-displayed",function(){var b=a(".pp_woocommerce_quick_view").find(".yith-wccl-data").data("attr");b&&a.yith_wccl(b)})});